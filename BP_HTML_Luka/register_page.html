<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Account aanmaken â€“ Lost in Tra(i)nslation</title>
    <link href="./css/output.css" rel="stylesheet">
</head>
<body class="min-h-screen bg-cover bg-center" style="background-image: url('assets/achtergrond.jpg');">

    <div class="bg-black/50 backdrop-blur-sm min-h-screen flex items-center justify-center">

        <div class="bg-white p-8 rounded-xl shadow-2xl w-full max-w-sm">
            <h3 class="text-3xl font-bold mb-6 text-center text-gray-800">Nieuw Account</h3>

            <div id="register-message" class="hidden p-3 mb-4 text-center rounded-lg text-white font-bold" role="alert"></div>
            
            <form onsubmit="handleRegister(event)" class="space-y-5">
                
                <div>
                    <label for="reg_gebruikersnaam" class="block text-sm font-medium text-gray-700 mb-1">Gebruikersnaam</label>
                    <input type="text" id="reg_gebruikersnaam" name="reg_gebruikersnaam" required class="w-full rounded-lg border-gray-300 shadow-sm p-3 border focus:border-green-500 focus:ring-green-500">
                </div>

                <div>
                    <label for="reg_email" class="block text-sm font-medium text-gray-700 mb-1">E-mailadres</label>
                    <input type="email" id="reg_email" name="reg_email" required class="w-full rounded-lg border-gray-300 shadow-sm p-3 border focus:border-green-500 focus:ring-green-500">
                </div>
                
                <div>
                    <label for="reg_wachtwoord" class="block text-sm font-medium text-gray-700 mb-1">Wachtwoord</label>
                    <input type="password" id="reg_wachtwoord" name="reg_wachtwoord" required 
                           class="w-full rounded-lg border-gray-300 shadow-sm p-3 border focus:border-green-500 focus:ring-green-500"
                           onkeyup="validatePassword()">
                </div>

                <div id="password-requirements" class="text-xs space-y-1">
                    <p id="length" class="text-red-500 flex items-center">
                        <span class="mr-1">&times;</span> Minimaal 8 karakters
                    </p>
                    <p id="uppercase" class="text-red-500 flex items-center">
                        <span class="mr-1">&times;</span> Een hoofdletter (A-Z)
                    </p>
                    <p id="lowercase" class="text-red-500 flex items-center">
                        <span class="mr-1">&times;</span> Een kleine letter (a-z)
                    </p>
                    <p id="number" class="text-red-500 flex items-center">
                        <span class="mr-1">&times;</span> Een cijfer (0-9)
                    </p>
                    <p id="special" class="text-red-500 flex items-center">
                        <span class="mr-1">&times;</span> Een speciaal karakter (!@#$...)
                    </p>
                </div>

                <div>
                    <label for="reg_wachtwoord_bevestig" class="block text-sm font-medium text-gray-700 mb-1">Wachtwoord Bevestigen</label>
                    <input type="password" id="reg_wachtwoord_bevestig" name="reg_wachtwoord_bevestig" required class="w-full rounded-lg border-gray-300 shadow-sm p-3 border focus:border-green-500 focus:ring-green-500">
                </div>
                
                <button type="submit" disabled class="
                    w-full bg-green-600 hover:bg-green-700 text-white font-bold 
                    py-3 px-4 rounded-lg shadow-md transition duration-200 disabled:opacity-50
                ">
                    Account Aanmaken
                </button>
            </form>

            <div class="mt-4 text-center">
                <p class="text-sm text-gray-700">Heb je al een account? <a href="login_page.html" class="font-medium text-blue-600 hover:text-blue-700">Log hier in</a></p>
            </div>
            
            <div class="mt-6 text-center">
                <a href="index.html" class="text-sm text-gray-600 hover:text-blue-600 transition duration-200 font-medium">
                    &larr; Terug naar de hoofdpagina
                </a>
            </div>
            
        </div>
        
    </div>

    <script>
        /**
         * Valideert het wachtwoord in realtime en update de indicaties.
         */
        function validatePassword() {
            const input = document.getElementById('reg_wachtwoord').value;
            
            // Regulieve Expressies voor de vereisten
            const rules = [
                { id: 'length', regex: /.{8,}/, msg: 'Minimaal 8 karakters' },
                { id: 'uppercase', regex: /[A-Z]/, msg: 'Een hoofdletter (A-Z)' },
                { id: 'lowercase', regex: /[a-z]/, msg: 'Een kleine letter (a-z)' },
                { id: 'number', regex: /[0-9]/, msg: 'Een cijfer (0-9)' },
                { id: 'special', regex: /[^A-Za-z0-9]/, msg: 'Een speciaal karakter (!@#$...)', },
            ];

            let isValid = true;
            
            rules.forEach(rule => {
                const element = document.getElementById(rule.id);
                if (rule.regex.test(input)) {
                    // Regel OK: Groen en Vinkje
                    element.classList.remove('text-red-500');
                    element.classList.add('text-green-600');
                    element.querySelector('span').innerHTML = '&#10003;'; // HTML entity voor vinkje (âœ“)
                } else {
                    // Regel NIET OK: Rood en Kruisje
                    element.classList.remove('text-green-600');
                    element.classList.add('text-red-500');
                    element.querySelector('span').innerHTML = '&times;'; // HTML entity voor kruisje (Ã—)
                    isValid = false;
                }
            });
            
            // De registratie knop alleen inschakelen als alle regels voldaan zijn
            document.querySelector('button[type="submit"]').disabled = !isValid;
        }


        /**
         * Simuleert een succesvolle registratie en stuurt de gebruiker daarna door naar de login pagina.
         */
        function handleRegister(event) {
            event.preventDefault(); 
            
            const password = document.getElementById('reg_wachtwoord').value;
            const confirmPassword = document.getElementById('reg_wachtwoord_bevestig').value;
            const messageBox = document.getElementById('register-message');
            const form = event.target;
            
            // Controleer validatie status
            validatePassword();
            const registerButton = document.querySelector('button[type="submit"]');

            messageBox.classList.remove('hidden', 'bg-red-500', 'bg-green-500');

            if (registerButton.disabled) {
                messageBox.classList.add('bg-red-500');
                messageBox.innerHTML = 'ðŸ›‘ Fout: Gelieve alle wachtwoordvereisten te voldoen.';
                return;
            }
            
            if (password !== confirmPassword) {
                messageBox.classList.add('bg-red-500');
                messageBox.innerHTML = 'ðŸ›‘ Fout: Wachtwoorden komen niet overeen.';
                return;
            }

            // Simuleer succesvolle registratie
            form.style.display = 'none'; // Verberg het formulier
            messageBox.classList.add('bg-green-500');
            messageBox.innerHTML = 'âœ… Account succesvol aangemaakt! Je wordt doorgestuurd naar de inlogpagina...';
            
            // Vertraagde redirect
            setTimeout(() => {
                window.location.href = 'login_page.html';
            }, 3000); 
        }

        // Zorg ervoor dat de knop in het begin is uitgeschakeld (dit staat al in de HTML)
        // document.querySelector('button[type="submit"]').disabled = true;
    </script>
</body>
</html>